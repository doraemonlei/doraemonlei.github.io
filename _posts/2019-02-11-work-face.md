---
layout: post
title: "【人脸总结】人脸项目总结"
subtitle: " \"Hello World!\""
date: 2019-02-11 09:36:12
author: "doraemonlei"
#header-img: "img/post-bg-2015.jpg"
#cover: 'http://on2171g4d.bkt.clouddn.com/jekyll-theme-h2o-postcover.jpg'
categories: 
tags: 人脸
---

# <font color='red'>协和医院人脸</font>

## <font color='red'>数据</font>
基本
- 截止日期：2016.07.12-2018.12.04
- 病例：3981
- 图像例：3262

疾病
- 诊断类别：253类
- top-20
    - 矮小	1235
    - 特纳综合征	398
    - 生长激素缺乏症	165
    - 小于胎龄儿	161
    - 生长激素部分缺乏症	148
    - PAH	140
    - 性早熟	112
    - 生长激素分泌过少	83
    - 特发性矮小	82
    - 身材矮小	66
    - 垂体前叶功能减退	39
    - 乳房发育	30
    - 咨询	25
    - 颅咽管瘤术后	20
    - 小于胎龄儿,矮小	20
    - 颅咽管瘤	17
    - 软骨发育不良	16
    - 矮小，生长激素分泌过少	16
    - 甲减	14
    - 生长迟缓	12

## <font color='red'>项目</font>
### 1 特纳综合征-传统机器学习方法二分类
- 状态：完成
- 特征：全局特征（几何，纹理），局部特征（几何，纹理，斑点）
- 分类器：SVM,adaboost
- 模型评估：acc 83.4

### 2 内分泌疾病-深度学习方法多分类
- 状态：review
- 基本思路：整理协和医院数据，提取前几类诊断疾病数据进行多分类研究
- 方法：深度学习，深度格式塔

### 3 人脸辅助诊断指南
- 状态：整理+精校
- 《1 人脸图像计算机辅助诊断关键技术》->整理+精校
- 《2 人脸图像计算机辅助诊断相关研究与应用》->整理+精校
- 《3 特纳综合征人脸图像辅助诊断系统》->整理+精校
- 《4 人脸图像其他应用简介》->review
- 《5 人脸图像数据库》->review

### 4 儿童人脸形态学变化研究
- 状态：review
- 需求1：儿童生长发育中人脸变化（自然生长影响，遗传影响，疾病影响）的review
- 需求2：通过研究，可以生成患者手术之后恢复的人脸图像
- 方法：GAN，自动编码器

## <font color='red'>成果计划</font>
系统
- 二分类：优化系统性能；增量训练提升模型性能
- 多分类：完成建模，优化，部署，使用等各部分内容
- 人脸生成：完成建模，优化，部署，使用等各部分内容

论文
- 1 改变特征，分类器，增量数据，更加精细化整体流程（增加更多的review内容，增加医学中统计分析层面内容等）
- 2 多分类论文
- 3 儿童人脸形态学基础分析论文
    - 中文：综述
    - 英文：生成系统

其他
- 软著
- 专利

# <font color='red'>儿童医院人脸</font>

## <font color='red'>数据</font>
基本
- 截止日期：2018.03.14-2018.12.28
- 病例：1319
- 图像例：1319

疾病
- 诊断类别：147类
- top-20
    - 腺扁大	348
    - 腺大	179
    - 扁大	96
    - 鼾症	61
    - 过敏性鼻炎	52
    - 腺扁	50
    - 腺扁肥大	42
    - 鼻炎	25
    - 腺大，过敏性鼻炎	21
    - 腺大，鼻炎	18
    - 腺扁大，过敏性鼻炎	18
    - 过敏性鼻炎，腺大	16
    - 慢扁炎	13
    - 腺扁大，鼻炎	12
    - 鼻炎，腺大	11
    - 未做	11
    - 鼻炎，腺扁大	11
    - 过敏性鼻炎，腺扁大	10
    - 鼾症，腺扁大	8
    - 打鼾	7

## <font color='red'>项目</font>
### 1 腺样体面容-传统机器学习方法二分类
- 状态：优化
- 问题
    - 缺少专家标记样本
    - 缺少同医院对照组样本
- 特征：局部特征（几何，纹理）
- 分类器：SVM,xgboost
- 模型评估：acc 81

### 2 腺样体面容分层分析
- 状态：review
- 聚类分析不同程度患者相关指标的差异性。
- 问题
    - 缺少相关指标数据，缺少osa，腺大，扁大，腺扁大轻、中、重分级标准。

### 3 儿童人脸形态学变化研究
- 状态：review
- 需求1：儿童生长发育中人脸变化（自然生长影响，遗传影响，疾病影响）的review
- 需求2：通过研究，可以生成患者手术之后恢复的人脸图像
- 方法：GAN，自动编码器

## <font color='red'>成果计划</font>
系统
- 二分类：优化系统性能；增量训练提升模型性能
- 人脸生成：完成建模，优化，部署，使用等各部分内容

论文
- 1 腺样体面容精细化流程英文论文
- 2 腺样体面容分层分析论文
- 3 儿童人脸形态学基础分析论文
    - 中文：综述
    - 英文：生成系统

其他
- 软著
- 专利

# <font color='red'>安贞医院人脸</font>

## <font color='red'>数据</font>
`基本`
- 截止日期：2019.01.17-2019.01.28
- 病例：49
- 图像例：49

`疾病`
- 诊断类别：
    - OSA:轻度，中度，重度
    - 低血氧症：轻度，中度，重度

- 备注：
    - AHI
    - 最低血氧和

`睡眠呼吸暂停的分度标准` 

根据血氧饱和度(Sa02)值和睡眠呼吸紊乱指数(RDI)，将睡眠呼吸暂停分为三度。

`呼吸紊乱指数（AHI或RDI）`
- 是指平均每小时睡眠中，呼吸暂停+低通气次数。
- 呼吸暂停（Apnea）
    - 指口鼻气流完全停止大于等于10秒；
    - 术语：气道大概阻塞100%。血氧下降
- 低通气（Hypopnea）
    - 指气流下降大于或等于50%，持续10秒以上，并伴有不少 3%的SaO2（血氧饱和度）下降 或微觉醒 
    - 术语：气道大概阻塞50%

`血氧饱和度(SpO2)`  

是血液中被氧结合的氧合血红蛋白(HbO2)的容量占全部可结合的血红蛋白(Hb，hemoglobin)容量的百分比，即血液中血氧的浓度，它是呼吸循环的重要生理参数。而功能性氧饱和度为HbO2浓度与HbO2+Hb浓度之比，有别于氧合血红蛋白所占百分数。因此，监测动脉血氧饱和度(SaO2)可以对肺的氧合和血红蛋白携氧能力进行估计。正常人体动脉血的血氧饱和度为98% ，静脉血为75%。

`成人OSA病情程度判断依据`

|指标| 程度 |指标| 程度|
|---| --- |---|---|
|AHI（次/h）| | 最低SaO2（%）| |
|5-15|轻度|85-90|轻度|
|>15-30|中度|80-<85|中度|
|>30|重度|<80|重度|

> 注意：OSA：阻塞性睡眠呼吸暂停；AHI（主要依据）：呼吸暂停低通气指数；SaO2（辅助依据）：动脉血氧饱和度

## <font color='red'>项目</font>

### 1 成人OSA-人脸特征差异性分析
- 状态：收集数据
- 分析内容
    - 患者与正常人人脸相关几何特征分析
    - 患者AHI分级相关几何特征分析
    - 患者低血氧症分级几何特征分析

### 2 成人OSA-二分类
- 状态：收集数据
- 方法：传统和深度学习识别是否为OSA
- 问题：
    - 缺少对照组

## <font color='red'>成果计划</font>
系统
- 二分类：优化系统性能；增量训练提升模型性能

论文
- 1 成人OSA识别精细化流程英文论文
- 2 成人OSA分层分析论文

其他
- 软著
- 专利


# <font color='red'>人脸诊断服务api</font>

## 模型
`数据`  
- 来源：协和
- 时间截止：2018.12.04
- 样本：正样本：367例；负样本：1735例

`模型`  
- 特征：
    - 人脸68特征点2278个距离特征
    - 左右内眦部位纹理特征80个
    - ★额宽
    - ★鼻梁高度
    - ★眼距
    - ★黑痣数量
    - ★身高
    - ★身高百分位

- 模型
    - xgboost

- 参数选择
    - 数据：训练：测试=3：1
    - 5折交叉验证网格搜索：
    - "max_depth": [10,30,50],
    - "min_child_weight" : [1,3,6],
    - "n_estimators": [200],
    - "learning_rate": [0.05, 0.1,0.16]
    - XGBClassifier(base_score=0.5, booster='gbtree', colsample_bylevel=1,
       colsample_bytree=1, gamma=0, learning_rate=0.05, max_delta_step=0,
       max_depth=10, min_child_weight=1, missing=None, n_estimators=200,
       n_jobs=1, nthread=None, objective='binary:logistic', random_state=0,
       reg_alpha=0, reg_lambda=1, scale_pos_weight=1, seed=None,
       silent=True, subsample=1)

- 模型评估
    - auc (0.9999876486027481, 0.7152516346344363)
    - acc average 0.81
    - sensitivity average 0.65
    - specificity average 0.95

## 功能
`部署方案`   
- flask(flask_restful)
- gunicorn
- nginx
- supervisor

`POST参数`  
- `'img'`:图像  
- `'height'`:身高  
- `'hp'`:身高百分位（'hp_<3%', 'hp_3%~10%', 'hp_10%~25%', 'hp_25%~50%', 'hp_50%~75%','hp_75%~90%','hp_90%~97%'',hp_>97%'）  

`返回` 
- `'features'`:提取的特征（额宽，鼻梁高度，眼距，黑痣数量，身高区间，身高百分位编码（8位））  
- `'predict_proba'`:患TS的可能性[正常，患病]   
- `'processed_img'`:预处理后的图片地址（人脸矫正，几何归一化，灰度归一化，光照均衡，截取人脸区域） 


<pre>
<code class="language-json">{
    "features": [
        0.77,
        0.29,
        0.43,
        1,
        2,
        1,
        0,
        0,
        0,
        0,
        0,
        0,
        0
    ],
    "predict_proba": [
        0.9266353845596313,
        0.07336459308862686
    ],
    "processed_img": "http://117.114.138.52:32921/static/pro/71_1.jpg"
}</code></pre>

## 计划
- 特征点名称和位置
- 特征点人脸图像
- 固定几个特征的真实值和与平均水平的对比

## 更新

<font color='red'>2019.02.14</font>
- 版本
    - v1.0.0

- 功能
    - 特纳综合征识别
    - 预处理图像

- 新增

- 修复

- 优化

- 删除

- 即将删除

<font color='red'>2019.02.15</font>
- 版本
    - v1.0.1

- 功能
    - 特纳综合征识别
    - 预处理图像

- 新增
    - 无脸返回
    - 图像命名

- 修复

- 优化

- 删除

- 即将删除